# -*- coding: utf-8 -*-
"""1주: 코로나19 앱 개선해보기.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1DjuE9mPvU9jrEywK0xdO2IvBqqFCOcd9

**1주차 미션: 코로나19 앱 개선해보기**
"""

#2) 부분적으로 개선: 하나씩 선택할 필요 없이 전체선택해 넘기기

"""**#1. 부분적으로 구현**"""

# 1-1) 로그인
import time

pwd = str(1234)
a = 0
timer = 0
name = input('이름을 입력하세요 : ')

# 이름 입력 후, 비밀번호 입력
while True:
  ip_pwd = input('건강상태 자가진단: ○○초등학교 '+name+'님의 비밀번호를 입력하세요. : ')

  if pwd == ip_pwd :
    print('로그인되었습니다. ')
    print('----------------------------------------------------------------------------------------------------------------')
    break

# 비밀번호 5회 이상 틀린 경우 5분 후에 재시도
  else :
    a = a+1

    if a==5:
      print('비밀번호가 5회 이상 틀렸습니다. 5분 후에 재시도해 주세요.')
      print('----------------------------------------------------------------------------------------------------------------')
      while True:
        start = time.time()
        ip_time = input('5분이 경과한 경우 1을 입력해주세요. : ' )
        end = time.time()
        timer = timer+int(end-start)
        if (timer/60) <= 5 :
          print('약 '+str(5-int(timer/60))+'분 남았습니다. 다시 시도해 주세요.')
        else :
          a=0
          print('----------------------------------------------------------------------------------------------------------------')
          break

    else:
      print('사용자 비밀번호가 맞지 않습니다. 5회 틀리실 경우 5분 후에 재시도가 가능합니다. 현재 '+str(a)+'회 틀리셨습니다.')
      print('----------------------------------------------------------------------------------------------------------------')

#자가검진한 날짜 등록
  date = datetime.datetime.now()
  print("{}님의 {}년 {}월 {}일 자가진단을 시작합니다.".format(name, date.year, date.month, date.day))

# 1-2) 자가진단

import time
timer = 0

#질문 시작
while True:
    num1 = input('1. 귀하는 현재 코로나19가 의심되는 임상증상이 있나요? (1: 아니요 / 2: 예)  ')
    num2 = input('2. 귀하는 오늘(어제 저녁 포함) 신속항원검사(자가진단)를 실시했나요? (1: 검사하지 않음 / 2: 음성 / 3: 양성)  ')
    num3 = input('3. 귀하 본인이 PCR 등 검사를 받고 그 결과를 기다리고 있나요?  (1: 아니요 / 2: 예)  ')

#각 항목에 맞는 프린터 출력 및 정상등교 안내
    if num1 == '2' :
      print('현재 귀하의 건강상태는 코로나19 의심증상이 있으므로 건강한 학교 생활을 위해 호전될 때까지 등교를 중지해 주세요.')
    elif num2 == '3' :
      print('검사결과 양성이면 선별진료소를 방문하여 PCR 검사나 지정의료기관을 방문하여 전문가용 신속항원검사를 받으시기 바랍니다.')
    elif num3 == '2' :
      print('귀하의 검사 결과가 음성으로 확인될 때까지 출근 중지를 권고하고 있습니다.')
    elif num1 == '1' and num2 == '1' and num2 == '2' and num3 == '1' :
      print('정상 등교하셔도 됩니다.')
      break
    else :
      print('다시 입력해 주세요.')
      continue

#잘못 입력할 경우 처음부터 다시 시작할지 안내
    sol = input('처음으로 이동하시겠습니까? (1: 예 / 2: 아니요)  ')
    print('----------------------------------------------------------------------------------------------------------------')
    
#다시 시작할 경우 3분 경과 후 시도 가능
    if sol == '1':
      while True:
        start = time.time()
        ip_time = input('3분이 경과한 경우 다시 시작할 수 있습니다. 3분이 지난 경우 1을 입력해주세요. : ' )
        end = time.time()
        timer = timer+int(end-start)
        if (timer/60) <= 3 :
          print('약 '+str(3-int(timer/60))+'분 남았습니다. 다시 시도해 주세요.')
        else :
          print('----------------------------------------------------------------------------------------------------------------')
          timer=0
          break
      continue
    else:
      break